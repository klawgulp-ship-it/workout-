<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>75 Day Hard | Glutes & Abs Challenge</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Inter', sans-serif; background: linear-gradient(135deg, #0D0D0D 0%, #1A1A2E 50%, #16213E 100%); color: #FFF; min-height: 100vh; }
    .hide { display: none !important; }
    .page { min-height: 100vh; padding: 20px; max-width: 500px; margin: 0 auto; }
    
    .landing { display: flex; flex-direction: column; align-items: center; padding-top: 40px; text-align: center; }
    .fire { font-size: 70px; filter: drop-shadow(0 0 30px rgba(255, 107, 53, 0.8)); margin-bottom: 10px; }
    .main-title { font-family: 'Bebas Neue', sans-serif; font-size: 70px; background: linear-gradient(135deg, #FF6B35, #FF8E53, #FFB347); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; letter-spacing: 6px; line-height: 1; }
    .sub-title { font-family: 'Bebas Neue', sans-serif; font-size: 45px; color: #00FF88; text-shadow: 0 0 40px rgba(0, 255, 136, 0.5); letter-spacing: 12px; }
    .tagline { font-size: 11px; color: #888; margin-top: 15px; letter-spacing: 2px; text-transform: uppercase; }
    
    .form-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 20px; padding: 25px; width: 100%; margin-top: 30px; }
    .form-title { font-family: 'Bebas Neue', sans-serif; font-size: 16px; letter-spacing: 3px; text-align: center; margin-bottom: 20px; color: #FF6B35; }
    .input-group { margin-bottom: 18px; }
    .input-label { display: block; font-size: 10px; letter-spacing: 2px; color: #888; margin-bottom: 6px; text-transform: uppercase; }
    .text-input { width: 100%; padding: 14px; background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 10px; color: #FFF; font-size: 16px; outline: none; }
    .text-input:focus { border-color: #FF6B35; }
    input[type="date"]::-webkit-calendar-picker-indicator { filter: invert(1); cursor: pointer; }
    
    .start-btn { width: 100%; padding: 16px; background: linear-gradient(135deg, #FF6B35, #FF8E53); border: none; border-radius: 10px; color: #000; font-family: 'Bebas Neue', sans-serif; font-size: 18px; letter-spacing: 3px; cursor: pointer; box-shadow: 0 6px 25px rgba(255, 107, 53, 0.4); }
    .start-btn:active { transform: scale(0.98); }
    
    .features { display: flex; justify-content: space-around; margin-top: 20px; padding-top: 18px; border-top: 1px solid rgba(255,255,255,0.1); }
    .feature { display: flex; flex-direction: column; align-items: center; gap: 6px; font-size: 10px; color: #888; }
    .feature-icon { font-size: 22px; }
    .error-text { color: #FF4757; font-size: 12px; margin-bottom: 12px; text-align: center; }

    .cal-header { display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 16px; }
    .cal-title { font-family: 'Bebas Neue', sans-serif; font-size: 26px; letter-spacing: 2px; }
    .cal-sub { font-size: 13px; color: #888; margin-top: 2px; }
    .squad-btn { padding: 10px 16px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: #FFF; font-size: 13px; cursor: pointer; }
    .squad-btn.active { background: rgba(0,255,136,0.15); border-color: rgba(0,255,136,0.4); }
    
    .progress-section { margin-bottom: 16px; }
    .progress-bar { height: 6px; background: rgba(255,255,255,0.1); border-radius: 3px; overflow: hidden; }
    .progress-fill { height: 100%; background: linear-gradient(90deg, #00FF88, #00D9FF); border-radius: 3px; transition: width 0.5s; }
    .progress-stats { display: flex; justify-content: space-between; margin-top: 6px; font-size: 11px; color: #888; }
    
    .legend { display: flex; gap: 12px; margin-bottom: 14px; flex-wrap: wrap; }
    .legend-item { display: flex; align-items: center; gap: 5px; font-size: 10px; color: #888; }
    .legend-dot { width: 8px; height: 8px; border-radius: 50%; }
    
    .calendar-grid { display: flex; flex-direction: column; gap: 6px; }
    .week-row { display: flex; gap: 5px; align-items: center; }
    .week-label { width: 26px; font-size: 10px; color: #555; }
    .day-cell { flex: 1; aspect-ratio: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(255,255,255,0.05); border: 2px solid transparent; border-radius: 6px; cursor: pointer; position: relative; min-width: 32px; font-family: 'Bebas Neue', sans-serif; }
    .day-cell:active { transform: scale(0.95); }
    .day-cell.completed { background: rgba(0, 255, 136, 0.15); border-color: #00FF88; }
    .day-cell.today { background: rgba(255, 107, 53, 0.2); border-color: #FF6B35; box-shadow: 0 0 15px rgba(255, 107, 53, 0.4); }
    .day-cell.missed { background: rgba(255, 71, 87, 0.15); border-color: #FF4757; }
    .day-cell.future { opacity: 0.5; }
    .day-cell.rest { background: rgba(100, 100, 255, 0.1); }
    .day-num { font-size: 13px; font-weight: bold; }
    .checkmark { font-size: 8px; color: #00FF88; position: absolute; top: 1px; right: 3px; }
    .rest-mark { font-size: 7px; color: #8888FF; position: absolute; bottom: 1px; }
    
    .reset-btn { width: 100%; padding: 12px; margin-top: 16px; background: transparent; border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: #888; cursor: pointer; font-size: 13px; }

    .workout-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
    .back-btn { padding: 8px 14px; background: rgba(255,255,255,0.1); border: none; border-radius: 8px; color: #FFF; cursor: pointer; font-size: 13px; }
    .day-badge { text-align: center; font-family: 'Bebas Neue', sans-serif; }
    .day-badge .day { font-size: 18px; }
    .day-badge .type { font-size: 11px; color: #FF6B35; letter-spacing: 2px; }
    .already-done { color: #00FF88; font-size: 11px; }
    
    .total-time-badge { text-align: center; padding: 8px 16px; background: rgba(0, 255, 136, 0.1); border: 1px solid rgba(0, 255, 136, 0.3); border-radius: 20px; margin-bottom: 16px; font-size: 12px; color: #00FF88; }
    
    .workout-progress { height: 3px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; margin-bottom: 6px; }
    .workout-progress-fill { height: 100%; background: linear-gradient(90deg, #FF6B35, #00FF88); transition: width 0.3s; }
    .exercise-count { text-align: center; font-size: 11px; color: #888; margin-bottom: 20px; }
    
    .timer-section { display: flex; justify-content: center; margin-bottom: 20px; }
    .timer-circle { width: 170px; height: 170px; border-radius: 50%; border: 5px solid #FF6B35; display: flex; flex-direction: column; align-items: center; justify-content: center; background: rgba(0,0,0,0.3); }
    .timer-circle.resting { border-color: #00FF88; }
    .timer-label { font-family: 'Bebas Neue', sans-serif; font-size: 13px; letter-spacing: 3px; opacity: 0.7; margin-bottom: 5px; }
    .timer-time { font-family: 'Bebas Neue', sans-serif; font-size: 48px; letter-spacing: 3px; }
    
    .exercise-info { text-align: center; margin-bottom: 12px; }
    .exercise-name { font-family: 'Bebas Neue', sans-serif; font-size: 24px; letter-spacing: 2px; margin-bottom: 6px; }
    .exercise-hint { font-size: 12px; color: #888; }
    
    .exercise-desc { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; padding: 14px; margin-bottom: 20px; text-align: center; }
    .exercise-desc-title { font-size: 10px; color: #FF6B35; letter-spacing: 2px; margin-bottom: 6px; text-transform: uppercase; }
    .exercise-desc-text { font-size: 13px; color: #CCC; line-height: 1.5; }
    
    .workout-controls { display: flex; gap: 10px; margin-bottom: 20px; }
    .play-btn { flex: 2; padding: 16px; border: none; border-radius: 10px; color: #000; font-family: 'Bebas Neue', sans-serif; font-size: 16px; letter-spacing: 2px; cursor: pointer; background: #00FF88; }
    .play-btn.running { background: #FF4757; }
    .skip-btn { flex: 1; padding: 16px; background: rgba(255,255,255,0.1); border: none; border-radius: 10px; color: #FFF; font-size: 13px; cursor: pointer; }
    
    .up-next { background: rgba(255,255,255,0.03); border-radius: 14px; padding: 14px; margin-bottom: 14px; }
    .up-next-title { font-family: 'Bebas Neue', sans-serif; font-size: 11px; letter-spacing: 2px; color: #888; margin-bottom: 8px; }
    .up-next-item { display: flex; justify-content: space-between; padding: 7px 0; border-bottom: 1px solid rgba(255,255,255,0.05); font-size: 12px; }
    .up-next-item:last-child { border-bottom: none; }
    .up-next-dur { color: #888; }
    
    .restart-btn { width: 100%; padding: 12px; background: transparent; border: 1px solid rgba(255,255,255,0.2); border-radius: 10px; color: #888; cursor: pointer; font-size: 13px; }

    .complete-screen { display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 80vh; text-align: center; }
    .confetti { font-size: 70px; margin-bottom: 15px; }
    .complete-title { font-family: 'Bebas Neue', sans-serif; font-size: 42px; background: linear-gradient(135deg, #00FF88, #00D9FF); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; margin-bottom: 8px; }
    .complete-sub { font-size: 15px; color: #888; margin-bottom: 25px; }
    .complete-badge { display: flex; align-items: center; gap: 8px; padding: 14px 20px; background: rgba(255, 183, 71, 0.1); border: 1px solid rgba(255, 183, 71, 0.3); border-radius: 50px; margin-bottom: 30px; }
    .badge-icon { font-size: 22px; }
    .back-to-cal { padding: 14px 28px; background: linear-gradient(135deg, #00FF88, #00D9FF); border: none; border-radius: 10px; color: #000; font-family: 'Bebas Neue', sans-serif; font-size: 15px; letter-spacing: 2px; cursor: pointer; }

    .squad-header { display: flex; align-items: center; gap: 16px; margin-bottom: 20px; }
    .squad-title { font-family: 'Bebas Neue', sans-serif; font-size: 22px; letter-spacing: 2px; }
    
    .squad-tabs { display: flex; gap: 10px; margin-bottom: 20px; }
    .squad-tab { flex: 1; padding: 12px; background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 10px; color: #888; font-family: 'Bebas Neue', sans-serif; font-size: 14px; letter-spacing: 2px; cursor: pointer; text-align: center; }
    .squad-tab.active { background: rgba(255, 107, 53, 0.2); border-color: #FF6B35; color: #FFF; }
    
    .squad-panel { display: none; }
    .squad-panel.active { display: block; }
    
    .squad-card { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 16px; padding: 24px; text-align: center; }
    .card-title { font-family: 'Bebas Neue', sans-serif; font-size: 18px; letter-spacing: 2px; margin-bottom: 8px; }
    .card-desc { font-size: 13px; color: #888; margin-bottom: 16px; }
    .create-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #00FF88, #00D9FF); border: none; border-radius: 10px; color: #000; font-family: 'Bebas Neue', sans-serif; font-size: 15px; letter-spacing: 2px; cursor: pointer; }
    .code-input { width: 100%; padding: 18px; background: rgba(255,255,255,0.05); border: 2px solid rgba(255,255,255,0.1); border-radius: 10px; color: #FFF; font-family: 'Bebas Neue', sans-serif; font-size: 22px; text-align: center; letter-spacing: 6px; margin-bottom: 12px; text-transform: uppercase; }
    .code-input:focus { border-color: #FF6B35; outline: none; }
    .join-btn { width: 100%; padding: 14px; background: linear-gradient(135deg, #FF6B35, #FF8E53); border: none; border-radius: 10px; color: #000; font-family: 'Bebas Neue', sans-serif; font-size: 15px; letter-spacing: 2px; cursor: pointer; }
    
    .code-box { background: rgba(0, 255, 136, 0.1); border: 2px solid rgba(0, 255, 136, 0.3); border-radius: 14px; padding: 18px; text-align: center; margin-bottom: 10px; }
    .code-label { display: block; font-size: 10px; letter-spacing: 2px; color: #888; margin-bottom: 6px; }
    .code-value { display: block; font-family: 'Bebas Neue', sans-serif; font-size: 32px; letter-spacing: 6px; color: #00FF88; margin-bottom: 10px; }
    .copy-btn { padding: 8px 16px; background: rgba(255,255,255,0.1); border: none; border-radius: 6px; color: #FFF; cursor: pointer; font-size: 12px; }
    .share-hint { text-align: center; font-size: 12px; color: #888; margin-bottom: 16px; }
    
    .sync-status { padding: 10px 14px; border-radius: 10px; margin-bottom: 16px; font-size: 12px; text-align: center; background: rgba(0,255,136,0.1); border: 1px solid rgba(0,255,136,0.3); color: #00FF88; }
    
    .members-section { margin-bottom: 24px; }
    .members-title { font-family: 'Bebas Neue', sans-serif; font-size: 13px; letter-spacing: 2px; color: #888; margin-bottom: 12px; }
    .member-card { display: flex; gap: 14px; padding: 14px; background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 14px; margin-bottom: 10px; }
    .member-avatar { width: 45px; height: 45px; border-radius: 50%; background: linear-gradient(135deg, #FF6B35, #FF8E53); display: flex; align-items: center; justify-content: center; font-family: 'Bebas Neue', sans-serif; font-size: 22px; flex-shrink: 0; }
    .member-info { flex: 1; }
    .member-name { display: block; font-size: 15px; margin-bottom: 6px; }
    .member-stats { font-size: 11px; color: #888; margin-bottom: 6px; }
    .mini-progress { height: 3px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden; }
    .mini-progress-fill { height: 100%; background: linear-gradient(90deg, #00FF88, #00D9FF); }
    
    .leave-btn { width: 100%; padding: 12px; background: transparent; border: 1px solid rgba(255, 71, 87, 0.3); border-radius: 10px; color: #FF4757; cursor: pointer; font-size: 13px; }
  </style>
</head>
<body>

<div id="landingPage" class="page landing">
  <div class="fire">üî•</div>
  <h1 class="main-title">75 DAY</h1>
  <h2 class="sub-title">HARD</h2>
  <p class="tagline">Glutes & Abs ‚Ä¢ No Equipment ‚Ä¢ 30 Min/Day</p>
  <div class="form-card">
    <h3 class="form-title">START YOUR TRANSFORMATION</h3>
    <div class="input-group">
      <label class="input-label">Your Name</label>
      <input type="text" id="nameInput" class="text-input" placeholder="Enter your name">
    </div>
    <div class="input-group">
      <label class="input-label">Start Date</label>
      <input type="date" id="dateInput" class="text-input">
    </div>
    <p id="errorMsg" class="error-text hide"></p>
    <button class="start-btn" onclick="startChallenge()">BEGIN CHALLENGE</button>
    <div class="features">
      <div class="feature"><span class="feature-icon">üí™</span><span>Targeted Workouts</span></div>
      <div class="feature"><span class="feature-icon">‚è±Ô∏è</span><span>Built-in Timers</span></div>
      <div class="feature"><span class="feature-icon">üë•</span><span>Squad Sync</span></div>
    </div>
  </div>
</div>

<div id="calendarPage" class="page hide">
  <div class="cal-header">
    <div>
      <h1 class="cal-title" id="calGreeting">Hey! üëã</h1>
      <p class="cal-sub" id="calDayCount">Day 1 of 75</p>
    </div>
    <button class="squad-btn" id="squadBtn" onclick="showSquad()">üë• Squad</button>
  </div>
  <div class="progress-section">
    <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
    <div class="progress-stats"><span id="completedCount">0 completed</span><span id="remainingCount">75 remaining</span></div>
  </div>
  <div class="legend">
    <div class="legend-item"><div class="legend-dot" style="background:#00FF88"></div><span>Done</span></div>
    <div class="legend-item"><div class="legend-dot" style="background:#FF6B35"></div><span>Today</span></div>
    <div class="legend-item"><div class="legend-dot" style="background:#FF4757"></div><span>Missed</span></div>
    <div class="legend-item"><div class="legend-dot" style="background:#2D3748"></div><span>Soon</span></div>
  </div>
  <div class="calendar-grid" id="calendarGrid"></div>
  <button class="reset-btn" onclick="resetChallenge()">üîÑ Reset Challenge</button>
</div>

<div id="workoutPage" class="page hide">
  <div class="workout-header">
    <button class="back-btn" onclick="showCalendar()">‚Üê Back</button>
    <div class="day-badge"><div class="day" id="workoutDay">Day 1</div><div class="type" id="workoutType">Glute Burner</div></div>
    <span class="already-done hide" id="alreadyDone">‚úì Done</span>
  </div>
  <div class="total-time-badge" id="totalTimeBadge">‚è±Ô∏è Total: ~30 min</div>
  <div class="workout-progress"><div class="workout-progress-fill" id="workoutProgressFill"></div></div>
  <p class="exercise-count" id="exerciseCount">Exercise 1 of 18</p>
  <div class="timer-section">
    <div class="timer-circle" id="timerCircle">
      <span class="timer-label" id="timerLabel">WORK</span>
      <span class="timer-time" id="timerTime">0:45</span>
    </div>
  </div>
  <div class="exercise-info">
    <h2 class="exercise-name" id="exerciseName">Glute Bridges</h2>
    <p class="exercise-hint" id="exerciseHint">15s rest after</p>
  </div>
  <div class="exercise-desc">
    <div class="exercise-desc-title">How To Do It</div>
    <div class="exercise-desc-text" id="exerciseDescText">Instructions here</div>
  </div>
  <div class="workout-controls">
    <button class="play-btn" id="playBtn" onclick="toggleTimer()">‚ñ∂ START</button>
    <button class="skip-btn" onclick="skipExercise()">Skip ‚Üí</button>
  </div>
  <div class="up-next">
    <h4 class="up-next-title">Coming Up:</h4>
    <div id="upNextList"></div>
  </div>
  <button class="restart-btn" onclick="restartWorkout()">üîÑ Restart Workout</button>
</div>

<div id="completePage" class="page hide">
  <div class="complete-screen">
    <div class="confetti">üéâ</div>
    <h1 class="complete-title" id="completeTitle">DAY 1 COMPLETE!</h1>
    <p class="complete-sub" id="completeSub">Workout crushed!</p>
    <div class="complete-badge"><span class="badge-icon">üèÜ</span><span>+1 Day Conquered</span></div>
    <button class="back-to-cal" onclick="showCalendar()">Back to Calendar</button>
  </div>
</div>

<div id="squadPage" class="page hide">
  <div class="squad-header">
    <button class="back-btn" onclick="showCalendar()">‚Üê Back</button>
    <h1 class="squad-title">Workout Squad</h1>
  </div>
  
  <div id="squadNoCode">
    <div class="squad-tabs">
      <button class="squad-tab active" onclick="switchSquadTab('create')">Create</button>
      <button class="squad-tab" onclick="switchSquadTab('join')">Join</button>
    </div>
    <div id="createPanel" class="squad-panel active">
      <div class="squad-card">
        <h3 class="card-title">üöÄ Create a Squad</h3>
        <p class="card-desc">Start a new squad and invite friends!</p>
        <button class="create-btn" onclick="createSquad()">Create Squad</button>
      </div>
    </div>
    <div id="joinPanel" class="squad-panel">
      <div class="squad-card">
        <h3 class="card-title">ü§ù Join a Squad</h3>
        <p class="card-desc">Enter the 6-letter code from your friend</p>
        <input type="text" id="joinCodeInput" class="code-input" placeholder="ABC123" maxlength="6" oninput="this.value=this.value.toUpperCase()">
        <p id="squadError" class="error-text hide"></p>
        <button class="join-btn" onclick="joinSquad()">Join Squad</button>
      </div>
    </div>
  </div>
  
  <div id="squadActive" class="hide">
    <div class="code-box">
      <span class="code-label">Squad Code</span>
      <span class="code-value" id="squadCodeDisplay">ABC123</span>
      <button class="copy-btn" onclick="copyCode()">üìã Copy</button>
    </div>
    <p class="share-hint">Share this code with friends!</p>
    <div class="sync-status" id="syncStatus">‚úÖ Live sync active</div>
    <div class="members-section">
      <h3 class="members-title">Squad Members (<span id="memberCount">1</span>)</h3>
      <div id="membersList"></div>
    </div>
    <button class="leave-btn" onclick="leaveSquad()">Leave Squad</button>
  </div>
</div>

<script>
// HARDCODED BACKEND - No setup required for users!
var API_URL = 'https://workout-production-d6e0.up.railway.app';

var userData = null, squadCode = null, squadMembers = [];
var currentDay = null, currentExercise = 0, timeLeft = 0;
var isResting = false, isRunning = false, timerInterval = null, syncInterval = null;

var exerciseDescriptions = {
  'Glute Bridges': 'Lie on back, knees bent. Push hips up squeezing glutes. Hold, then lower slowly.',
  'Single Leg Bridge (L)': 'Glute bridge but extend right leg. Push up using only left foot.',
  'Single Leg Bridge (R)': 'Glute bridge but extend left leg. Push up using only right foot.',
  'Donkey Kicks (L)': 'On all fours, kick left leg back and up. Keep knee bent 90¬∞.',
  'Donkey Kicks (R)': 'On all fours, kick right leg back and up. Keep knee bent 90¬∞.',
  'Fire Hydrants (L)': 'On all fours, lift left knee out to side. Lower with control.',
  'Fire Hydrants (R)': 'On all fours, lift right knee out to side. Lower with control.',
  'Sumo Squats': 'Wide stance, toes out. Squat keeping knees over toes.',
  'Pulse Squats': 'Stay in squat position. Pulse up and down, don\'t stand up.',
  'Curtsy Lunges': 'Step leg behind and across. Lower down, push back. Alternate.',
  'Standing Kickbacks (L)': 'Stand, kick left leg straight back. Squeeze glute.',
  'Standing Kickbacks (R)': 'Stand, kick right leg straight back. Squeeze glute.',
  'Frog Pumps': 'Lie down, soles together, knees wide. Thrust hips up.',
  'Clamshells (L)': 'Side-lying, knees bent. Lift top knee like clamshell.',
  'Clamshells (R)': 'Side-lying, knees bent. Lift top knee like clamshell.',
  'Squat Hold': 'Hold squat position. Keep chest up, breathe steadily.',
  'Glute Squeeze': 'Stand, squeeze glutes hard for 3 seconds. Repeat.',
  'Wall Sit': 'Back on wall, thighs parallel to floor. Hold position.',
  'Crunches': 'Lie down, curl shoulders toward knees. Keep lower back down.',
  'Bicycle Crunches': 'Bring opposite elbow to knee. Alternate sides.',
  'Leg Raises': 'Lie flat, lift legs to 90¬∞. Lower slowly.',
  'Flutter Kicks': 'Legs raised, kick up and down in small movements.',
  'Mountain Climbers': 'Plank position, drive knees to chest alternating.',
  'Plank Hold': 'Forearm plank. Keep body straight, don\'t sag.',
  'Side Plank (L)': 'Right forearm down, lift hips. Hold straight line.',
  'Side Plank (R)': 'Left forearm down, lift hips. Hold straight line.',
  'Dead Bug': 'Back down, arms up. Lower opposite arm and leg.',
  'Reverse Crunches': 'Curl knees to chest, lift hips off floor.',
  'Russian Twists': 'Seated, lean back. Rotate torso side to side.',
  'Heel Taps': 'Lie down, crunch up and tap each heel.',
  'V-Ups': 'Lift legs and torso together forming V shape.',
  'Scissor Kicks': 'Legs raised, cross over each other.',
  'High Knees': 'Run in place, knees high. Fast pace.',
  'Toe Touches': 'Legs up, crunch and reach for toes.',
  'Plank Jacks': 'Plank position, jump feet out and in.',
  'Light Stretching': 'Gently stretch all muscle groups. Hold 20-30s each.',
  'Deep Breathing': 'Inhale 4 counts, hold 4, exhale 6. Repeat.',
  'Foam Rolling': 'Roll out tight muscles. Focus on sore spots.',
  'Gentle Walking': 'Easy walk for active recovery.',
  'Meditation': 'Sit comfortably, focus on breath.',
  'Rest & Breathe': 'Take deep breaths. Prepare for next exercise.'
};

var gluteExercises = [
  {name:'Glute Bridges',duration:60,rest:15},{name:'Single Leg Bridge (L)',duration:45,rest:10},
  {name:'Single Leg Bridge (R)',duration:45,rest:15},{name:'Donkey Kicks (L)',duration:50,rest:10},
  {name:'Donkey Kicks (R)',duration:50,rest:15},{name:'Fire Hydrants (L)',duration:50,rest:10},
  {name:'Fire Hydrants (R)',duration:50,rest:15},{name:'Sumo Squats',duration:60,rest:20},
  {name:'Pulse Squats',duration:45,rest:15},{name:'Curtsy Lunges',duration:60,rest:20},
  {name:'Standing Kickbacks (L)',duration:45,rest:10},{name:'Standing Kickbacks (R)',duration:45,rest:15},
  {name:'Frog Pumps',duration:60,rest:15},{name:'Clamshells (L)',duration:50,rest:10},
  {name:'Clamshells (R)',duration:50,rest:15},{name:'Squat Hold',duration:45,rest:20},
  {name:'Glute Squeeze',duration:40,rest:10},{name:'Wall Sit',duration:45,rest:20}
];
var absExercises = [
  {name:'Crunches',duration:60,rest:15},{name:'Bicycle Crunches',duration:60,rest:15},
  {name:'Leg Raises',duration:50,rest:15},{name:'Flutter Kicks',duration:50,rest:15},
  {name:'Mountain Climbers',duration:60,rest:20},{name:'Plank Hold',duration:60,rest:20},
  {name:'Side Plank (L)',duration:40,rest:10},{name:'Side Plank (R)',duration:40,rest:15},
  {name:'Dead Bug',duration:50,rest:15},{name:'Reverse Crunches',duration:50,rest:15},
  {name:'Russian Twists',duration:60,rest:15},{name:'Heel Taps',duration:50,rest:15},
  {name:'V-Ups',duration:45,rest:20},{name:'Scissor Kicks',duration:50,rest:15},
  {name:'High Knees',duration:60,rest:20},{name:'Toe Touches',duration:45,rest:15},
  {name:'Plank Jacks',duration:45,rest:20}
];

function seededRandom(s){var x=Math.sin(s)*10000;return x-Math.floor(x);}
function shuffleWithSeed(a,s){var r=a.slice();for(var i=r.length-1;i>0;i--){var j=Math.floor(seededRandom(s+i)*(i+1));var t=r[i];r[i]=r[j];r[j]=t;}return r;}

function getWorkout(day){
  var wd=((day-1)%7)+1;
  if(wd===4||wd===7)return{day:day,isRestDay:true,title:'Active Recovery',exercises:[
    {name:'Light Stretching',duration:360,rest:0},{name:'Deep Breathing',duration:300,rest:0},
    {name:'Foam Rolling',duration:360,rest:0},{name:'Gentle Walking',duration:600,rest:0},
    {name:'Meditation',duration:300,rest:0}
  ]};
  var f=day%3,ex=[],t='';
  if(f===1){t='Glute Burner';var g=shuffleWithSeed(gluteExercises,day*100),a=shuffleWithSeed(absExercises,day*200);ex=g.slice(0,12).concat(a.slice(0,6));}
  else if(f===2){t='Core Crusher';var g=shuffleWithSeed(gluteExercises,day*300),a=shuffleWithSeed(absExercises,day*400);ex=a.slice(0,12).concat(g.slice(0,6));}
  else{t='Total Tone';var g=shuffleWithSeed(gluteExercises,day*500),a=shuffleWithSeed(absExercises,day*600);for(var i=0;i<9;i++)ex.push(g[i],a[i]);}
  return{day:day,isRestDay:false,title:t,exercises:ex};
}

function getTotalWorkoutTime(w){var t=0;for(var i=0;i<w.exercises.length;i++)t+=w.exercises[i].duration+w.exercises[i].rest;return Math.round(t/60);}
function formatTime(s){var m=Math.floor(s/60),sec=s%60;return m+':'+(sec<10?'0':'')+sec;}
function showPage(id){document.querySelectorAll('.page').forEach(function(p){p.classList.add('hide');});document.getElementById(id).classList.remove('hide');}
function saveLocal(){localStorage.setItem('75day_user',JSON.stringify(userData));localStorage.setItem('75day_squad',squadCode||'');localStorage.setItem('75day_members',JSON.stringify(squadMembers));}
function loadLocal(){try{var u=localStorage.getItem('75day_user'),s=localStorage.getItem('75day_squad'),m=localStorage.getItem('75day_members');if(u)userData=JSON.parse(u);if(s&&s.length>0)squadCode=s;if(m)squadMembers=JSON.parse(m);}catch(e){}}

async function apiCall(ep,method,body){try{var opt={method:method||'GET',headers:{'Content-Type':'application/json'}};if(body)opt.body=JSON.stringify(body);var r=await fetch(API_URL+ep,opt);if(!r.ok)throw new Error();return await r.json();}catch(e){return null;}}

async function startChallenge(){var n=document.getElementById('nameInput').value.trim(),d=document.getElementById('dateInput').value,e=document.getElementById('errorMsg');if(!n){e.textContent='Enter your name';e.classList.remove('hide');return;}if(!d){e.textContent='Select start date';e.classList.remove('hide');return;}e.classList.add('hide');userData={id:Date.now().toString(),name:n,startDate:d,completedDays:[]};var r=await apiCall('/api/users','POST',{id:userData.id,name:n,startDate:d});if(r)userData.completedDays=r.completed_days||[];saveLocal();showCalendar();}

function showCalendar(){if(!userData){showPage('landingPage');return;}if(syncInterval){clearInterval(syncInterval);syncInterval=null;}showPage('calendarPage');renderCalendar();}
function renderCalendar(){document.getElementById('calGreeting').textContent='Hey '+userData.name+'! üëã';var c=userData.completedDays.length;document.getElementById('calDayCount').textContent='Day '+Math.min(c+1,75)+' of 75';document.getElementById('progressFill').style.width=(c/75*100)+'%';document.getElementById('completedCount').textContent=c+' completed';document.getElementById('remainingCount').textContent=(75-c)+' remaining';var sb=document.getElementById('squadBtn');sb.textContent=squadCode?'üë• '+squadCode:'üë• Squad';sb.classList.toggle('active',!!squadCode);var g=document.getElementById('calendarGrid');g.innerHTML='';var sd=new Date(userData.startDate),td=new Date();td.setHours(0,0,0,0);for(var w=0;w<11;w++){var r=document.createElement('div');r.className='week-row';var l=document.createElement('span');l.className='week-label';l.textContent='W'+(w+1);r.appendChild(l);for(var d=0;d<7;d++){var day=w*7+d+1;if(day>75){var em=document.createElement('div');em.className='day-cell';em.style.visibility='hidden';r.appendChild(em);continue;}var dd=new Date(sd);dd.setDate(dd.getDate()+day-1);dd.setHours(0,0,0,0);var iC=userData.completedDays.indexOf(day)!==-1,iT=dd.getTime()===td.getTime(),iP=dd<td,iF=dd>td,iM=iP&&!iC,wo=getWorkout(day);var ce=document.createElement('button');ce.className='day-cell';if(iC)ce.classList.add('completed');if(iT)ce.classList.add('today');if(iM)ce.classList.add('missed');if(iF)ce.classList.add('future');if(wo.isRestDay)ce.classList.add('rest');ce.innerHTML='<span class="day-num">'+day+'</span>'+(iC?'<span class="checkmark">‚úì</span>':'')+(wo.isRestDay?'<span class="rest-mark">R</span>':'');(function(dn){ce.onclick=function(){showWorkout(dn);};})(day);r.appendChild(ce);}g.appendChild(r);}}
function resetChallenge(){if(confirm('Reset challenge?')){if(userData)apiCall('/api/users/'+userData.id,'DELETE');localStorage.removeItem('75day_user');localStorage.removeItem('75day_squad');localStorage.removeItem('75day_members');userData=null;squadCode=null;squadMembers=[];showPage('landingPage');}}

function showWorkout(day){currentDay=day;currentExercise=0;isResting=false;isRunning=false;clearInterval(timerInterval);var wo=getWorkout(day);timeLeft=wo.exercises[0].duration;document.getElementById('workoutDay').textContent='Day '+day;document.getElementById('workoutType').textContent=wo.title;document.getElementById('totalTimeBadge').textContent='‚è±Ô∏è Total: ~'+getTotalWorkoutTime(wo)+' min';document.getElementById('alreadyDone').classList.toggle('hide',userData.completedDays.indexOf(day)===-1);showPage('workoutPage');renderWorkout();}
function renderWorkout(){var wo=getWorkout(currentDay),ex=wo.exercises[currentExercise],tot=wo.exercises.length;document.getElementById('workoutProgressFill').style.width=((currentExercise+(isResting?0.5:0))/tot*100)+'%';document.getElementById('exerciseCount').textContent='Exercise '+(currentExercise+1)+' of '+tot;var ci=document.getElementById('timerCircle');ci.classList.toggle('resting',isResting);document.getElementById('timerLabel').textContent=isResting?'REST':'WORK';document.getElementById('timerTime').textContent=formatTime(timeLeft);var nm=isResting?'Rest & Breathe':ex.name;document.getElementById('exerciseName').textContent=nm;document.getElementById('exerciseHint').textContent=(!isResting&&ex.rest>0)?ex.rest+'s rest after':'';document.getElementById('exerciseDescText').textContent=exerciseDescriptions[nm]||'Give it your all!';var pb=document.getElementById('playBtn');pb.textContent=isRunning?'‚è∏ PAUSE':'‚ñ∂ START';pb.classList.toggle('running',isRunning);var ul=document.getElementById('upNextList');ul.innerHTML='';wo.exercises.slice(currentExercise+1,currentExercise+4).forEach(function(e){var it=document.createElement('div');it.className='up-next-item';it.innerHTML='<span>'+e.name+'</span><span class="up-next-dur">'+e.duration+'s</span>';ul.appendChild(it);});}
function toggleTimer(){isRunning=!isRunning;if(isRunning){timerInterval=setInterval(function(){timeLeft--;if(timeLeft<=0){var wo=getWorkout(currentDay),ex=wo.exercises[currentExercise];if(isResting){if(currentExercise<wo.exercises.length-1){currentExercise++;timeLeft=wo.exercises[currentExercise].duration;isResting=false;}else{completeWorkout();return;}}else{if(ex.rest>0){timeLeft=ex.rest;isResting=true;}else if(currentExercise<wo.exercises.length-1){currentExercise++;timeLeft=wo.exercises[currentExercise].duration;}else{completeWorkout();return;}}}renderWorkout();},1000);}else clearInterval(timerInterval);renderWorkout();}
function skipExercise(){var wo=getWorkout(currentDay);if(currentExercise<wo.exercises.length-1){currentExercise++;timeLeft=wo.exercises[currentExercise].duration;isResting=false;renderWorkout();}else completeWorkout();}
function restartWorkout(){currentExercise=0;isResting=false;isRunning=false;clearInterval(timerInterval);timeLeft=getWorkout(currentDay).exercises[0].duration;renderWorkout();}
async function completeWorkout(){isRunning=false;clearInterval(timerInterval);if(userData.completedDays.indexOf(currentDay)===-1){userData.completedDays.push(currentDay);var r=await apiCall('/api/users/'+userData.id+'/complete','POST',{day:currentDay});if(r)userData.completedDays=r.completed_days||userData.completedDays;saveLocal();}var wo=getWorkout(currentDay);document.getElementById('completeTitle').textContent='DAY '+currentDay+' COMPLETE!';document.getElementById('completeSub').textContent=wo.title+' crushed!';showPage('completePage');}

function showSquad(){showPage('squadPage');renderSquad();if(squadCode){loadSquadMembers();syncInterval=setInterval(loadSquadMembers,5000);}}
function switchSquadTab(t){document.querySelectorAll('.squad-tab').forEach(function(el,i){el.classList.toggle('active',(t==='create'&&i===0)||(t==='join'&&i===1));});document.getElementById('createPanel').classList.toggle('active',t==='create');document.getElementById('joinPanel').classList.toggle('active',t==='join');}
function renderSquad(){var hs=squadCode&&squadCode.length>0;document.getElementById('squadNoCode').classList.toggle('hide',hs);document.getElementById('squadActive').classList.toggle('hide',!hs);if(hs){document.getElementById('squadCodeDisplay').textContent=squadCode;document.getElementById('memberCount').textContent=squadMembers.length||1;var ml=document.getElementById('membersList');ml.innerHTML='';var mems=squadMembers.length>0?squadMembers:[userData];mems.forEach(function(m){var c=m.completed_days?m.completed_days.length:(m.completedDays?m.completedDays.length:0),iy=m.id===userData.id;var cd=document.createElement('div');cd.className='member-card';cd.innerHTML='<div class="member-avatar">'+(m.name||'?').charAt(0).toUpperCase()+'</div><div class="member-info"><span class="member-name">'+m.name+(iy?' (You)':'')+'</span><div class="member-stats">üî• '+c+'/75</div><div class="mini-progress"><div class="mini-progress-fill" style="width:'+(c/75*100)+'%"></div></div></div>';ml.appendChild(cd);});}}
async function loadSquadMembers(){if(!squadCode)return;var m=await apiCall('/api/squads/'+squadCode+'/members','GET');if(m){squadMembers=m;saveLocal();renderSquad();}}

async function createSquad(){var r=await apiCall('/api/squads','POST',{userId:userData.id});if(r){squadCode=r.code;squadMembers=[userData];saveLocal();loadSquadMembers();syncInterval=setInterval(loadSquadMembers,5000);renderSquad();}}
async function joinSquad(){var co=document.getElementById('joinCodeInput').value.toUpperCase().trim(),er=document.getElementById('squadError');if(!co||co.length!==6){er.textContent='Enter 6-letter code';er.classList.remove('hide');return;}er.classList.add('hide');try{var r=await fetch(API_URL+'/api/squads/'+co+'/join',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({userId:userData.id})});if(!r.ok){var e=await r.json();er.textContent=e.error||'Not found';er.classList.remove('hide');return;}var d=await r.json();squadCode=d.code;saveLocal();await loadSquadMembers();syncInterval=setInterval(loadSquadMembers,5000);}catch(e){er.textContent='Connection error';er.classList.remove('hide');return;}document.getElementById('joinCodeInput').value='';renderSquad();}
function copyCode(){if(navigator.clipboard)navigator.clipboard.writeText(squadCode).then(function(){alert('Copied: '+squadCode);});else prompt('Copy:',squadCode);}
async function leaveSquad(){if(!confirm('Leave squad?'))return;if(squadCode)await apiCall('/api/squads/'+squadCode+'/leave','POST',{userId:userData.id});squadCode=null;squadMembers=[];saveLocal();if(syncInterval){clearInterval(syncInterval);syncInterval=null;}renderSquad();}

function init(){loadLocal();document.getElementById('dateInput').value=new Date().toISOString().split('T')[0];if(userData)showCalendar();else showPage('landingPage');}
init();
</script>
</body>
</html>
